<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<link rel="stylesheet" href="css/CRM_rito.css" />
		<link rel="stylesheet" href="css/CRM_as_co.css" />
		<title></title>
		<style>
			.checkeds{
				
			}
		</style>
	</head>
	<body>
		<div class="center" id="ul_ove">
			<div class="cen_1 ceon">
				<h1>需求评估<span v-text='zt'></span></h1>
			</div>
			<div class="tab">
				<span class="img_">状态：</span><span class="zt" v-text="zt">{{zt}}</span>
			</div>
			<div class="div_div_1">
				<div class="div_div_s" style="border-bottom: 1px solid #b3b3b3;">
				<ul>
					<li>工期要求：
						<select id="A_durationneed" class="provinces">
							{{{'cA_durationneed'|options}}}
						</select>
					</li>
					<li>验收要求：
						<select id="A_acceptanceneed" class="provinces">
							{{{'cA_acceptanceneed'|options}}}
						</select>
					</li>
					<li>施工要求：
						<select id="A_constructneed" class="provinces">
							{{{'cA_constructneed'|options}}}
						</select>
					</li>
					<li>违约赔偿：
						<select id="A_defaultmakeup" class="provinces">
							{{{'cA_defaultmakeup'|options}}}
						</select>
					</li>
					<li style="color: red;" >商机质量：<span id="A_businessmass" v-model="item.A_businessmass">{{item.A_businessmass}}</span></li>
				</ul>
				<ul>
					<li>客户资质：
						<select id="A_aptitudes" class="provinces">
							{{{'cA_aptitudes'|options}}}
						</select>
					</li>
					<li>项目规模：
						<select id="A_projectscale" class="provinces">
							{{{'cA_projectscale'|options}}}
						</select>
					</li>
					<li>资金回笼：
						<select id="A_fundsbackfront" class="provinces">
							{{{'cA_fundsbackfront'|options}}}
						</select>
					</li>
					<li>项目预算：
						<select id="A_budget" class="provinces">
							{{{'cA_budget'|options}}}
						</select>
					</li>
				</ul>
				</div>
				<div class="div_div_s">
				<ul>
					<li>回扣要求：
						<select id="A_kickbackneed" class="provinces">
							{{{'cA_kickbackneed'|options}}}
						</select>
					</li>
					<li>项目阻力：
						<select id="A_projectdrag" class="provinces">
							{{{'cA_projectdrag'|options}}}
						</select>
					</li>
					<li>对手分析：
						<select id="A_compete" class="provinces">
							{{{'cA_compete'|options}}}
						</select>
					</li>
					<li style="color: red;">成单率：<span id="A_overorder" v-model="item.A_overorder">{{item.A_overorder}}</span></li>
					<li>
						评估结论：
						<select id="A_conclusion" >
							{{{'cA_conclusion'|options}}}
						</select>
					</li>
				</ul>
				<ul>
					<li>客户关注点：
						<select id="A_consumerFocus" class="provinces prov">
							{{{'cA_consumerFocus'|options}}}
						</select>
					</li>
					<li>客户关键人关系：
						<select id="A_consumerkey" class="provinces provs">
							{{{'cA_consumerkey'|options}}}
						</select>
					</li>
					<li>竞争力：
						<select id="A_competitiveness" class="provinces provst">
							{{{'cA_competitiveness'|options}}}
						</select>
					</li>
					<li>综合推荐评估：<span style="color: red;" v-model='Sunber.A_overter'>{{Sunber.A_overter}}</span></li>
				</ul>
				</div>	
				<div class="li_uts">	
				<button v-on:click="ok()">确定</button>
				<button class="out" onclick="util.bcak()">返回</button>
				</div>
			</div>			
		</div>
		<script type="text/javascript" src="js/jquery.min.js" ></script>
		<script type="text/javascript" src="js/vue.js" ></script>
		<script type="text/javascript" src="js/utils.js" ></script>
		<script type="text/javascript" src="js/CRM_as_ifrem.js" ></script>
		<script>
			var vm = new Vue({
				el:'#ul_ove',
				data:{
					items:{
					    cA_durationneed: [
							{ text: "宽松", value: "5" },
							{ text: "严格", value: "3" },
							{ text: "苛刻", value: "0" }
					    ],
					    cA_constructneed: [
							{ text: "宽松", value: "5" },
							{ text: "严格", value: "3" },
							{ text: "苛刻", value: "0" }
					    ],
					    cA_acceptanceneed: [
							{ text: "宽松", value: "5" },
							{ text: "严格", value: "3" },
							{ text: "苛刻", value: "0" }
					    ],
					    cA_defaultmakeup: [
							{ text: "无", value: "1" },
							{ text: "宽松", value: "5" },
							{ text: "严格", value: "3" },
							{ text: "苛刻", value: "0" }
					    ],
					    cA_aptitudes: [
							{ text: "没有实力", value: "0" },
							{ text: "一般", value: "10" },
							{ text: "有实力", value: "20" }
					    ],
					    cA_fundsbackfront: [
							{ text: "快", value: "20" },
							{ text: "账期一个月内", value: "10" },
							{ text: "慢", value: "0" }
					    ],
					    cA_projectscale: [
							{ text: "超大型", value: "20" },
							{ text: "大型", value: "15" },
							{ text: "中型", value: "10" },
							{ text: "小型", value: "5" }
					    ],
					    cA_budget: [
							{ text: "<1万", value: "5" },
							{ text: "1万-5万", value: "10" },
							{ text: "5-10", value: "15" },
							{ text: ">10", value: "20" }
					    ],
					    cA_businessmass: '',
					    cA_compete: [
							{ text: "无", value: "20" },
							{ text: "不清楚", value: "10" },
							{ text: "不强", value: "15" },
							{ text: "强", value: "0" }
					    ],
					    cA_consumerkey: [
							{ text: "没有", value: "0" },
							{ text: "一点", value: "5" },
							{ text: "可以", value: "15" },
							{ text: "搞定", value: "25" }
					    ],
					    cA_kickbackneed: [
							{ text: "没有", value: "0" },
							{ text: "有", value: "5" }
					    ],
					    cA_consumerFocus: [
							{ text: "价格", value: "5" },
							{ text: "质量", value: "9" },
							{ text: "品牌", value: "13" },
							{ text: "性价比", value: "15" }
					    ],
					    cA_competitiveness: [
							{ text: "弱", value: "5" },
							{ text: "一般", value: "10" },
							{ text: "强", value: "25" }
					    ],
					    cA_projectdrag: [
							{ text: "无", value: "10" },
							{ text: "有", value: "2" }
					    ],
					    cA_overorder: '',
					    cA_conclusion: [
							{ text: "请选择", value: "0" },
							{ text: "放弃", value: "1" },
							{ text: "普通商机", value: "2" },
							{ text: "重点商机", value: "3" },
							{ text: "鸭子商机", value: "4" }
					    ]
					},
					Sunber:{
						A_businessmass:'',
						A_overorder:'',
						A_overter:''
					},
					item:{
						A_businessmass:'',
						A_overorder:''
					},
					zt:"",
					Sner:''
				},
				methods:{
					ok:function(){
						if(objs_oves.Sunber == 2){
							as_flitrate_twos();
						}else{
							as_flitrate_two();
						}
						
					}
				},
				filters:{
					options:function(val){
						var itemKey = val.substring(1,val.length);
						var data = this.$data.items[val];
						var returns = [];
						for(var i=0;i<data.length;i++){
							var option_ = document.createElement("option");
							option_.innerText = data[i].text;
							option_.value = data[i].value;
							if(data[i].value==this.item[itemKey]){
								option_.setAttribute("selected",true);
							}
							returns.push(option_.outerHTML);
						}
						return returns.join("");
					}
				}
			});
			var objs_oves = util.getExreas();
			function extend(p,c){
									for(var item in c){
										p[item] = c[item];
									}
								}
			if(objs_oves.Sunber == 2){
							$('.zt').text('新增');
				
					}else{
							as_flitrate_ove();
							$('.zt').text('修改');
					}
		</script>
		<script>
			$(function(){//
				$('.div_div_s>ul>li>select').on("change",function(){							
					vm.$data.items.A_durationneed = $('#A_durationneed').val();
					vm.$data.items.A_acceptanceneed = $('#A_acceptanceneed').val();
					vm.$data.items.A_constructneed = $('#A_constructneed').val();
					vm.$data.items.A_defaultmakeup = $('#A_defaultmakeup').val();
					vm.$data.items.A_aptitudes = $('#A_aptitudes').val();
					vm.$data.items.A_projectscale = $('#A_projectscale').val();
					vm.$data.items.A_fundsbackfront = $('#A_fundsbackfront').val();
					vm.$data.items.A_budget = $('#A_budget').val();					
					//
					vm.$data.items.A_kickbackneed = $('#A_kickbackneed').val();
					vm.$data.items.A_projectdrag = $("#A_projectdrag").val();
					vm.$data.items.A_compete = $("#A_compete").val();
					vm.$data.items.A_consumerFocus = $("#A_consumerFocus").val();
					vm.$data.items.A_consumerkey =  $("#A_consumerkey").val();
					vm.$data.items.A_competitiveness = $("#A_competitiveness").val();
					if(objs_oves.Sunber == 2){
						jia();
						
					}else{
							vm.$data.item.A_businessmass = parseInt(vm.$data.items.A_durationneed)+parseInt(vm.$data.items.A_acceptanceneed)+
					parseInt(vm.$data.items.A_constructneed)+parseInt(vm.$data.items.A_defaultmakeup)+parseInt(vm.$data.items.A_aptitudes)+
					parseInt(vm.$data.items.A_projectscale)+parseInt(vm.$data.items.A_fundsbackfront)+parseInt(vm.$data.items.A_budget);
								
								
							vm.$data.item.A_overorder = parseInt(vm.$data.items.A_kickbackneed)+parseInt(vm.$data.items.A_projectdrag)+
					parseInt(vm.$data.items.A_compete)+parseInt(vm.$data.items.A_consumerFocus)+parseInt(vm.$data.items.A_consumerkey)+
					parseInt(vm.$data.items.A_competitiveness);
						}
					
//					console.log(vm.$data.item.A_businessmass)
					
				
					var A_overter = (parseInt(vm.$data.item.A_businessmass)+parseInt(vm.$data.item.A_overorder))/2;
//					console.log(vm.$data.item.A_conclusion)
					var indx = vm.$data.item.A_conclusion;
					if(A_overter<30){
						indx = 1;
					}else if(30<=A_overter&&A_overter<60){
						indx = 2;
					}else if(60<=A_overter&&A_overter<90){
						indx = 3;
					}else if(90<=A_overter){
						indx = 4;
					}
					switch(indx){
						case 1:{
							vm.$data.Sunber.A_overter = "放弃";
						};break;
						case 2:{
							vm.$data.Sunber.A_overter = "普通商机";
						};break;
						case 3:{
							vm.$data.Sunber.A_overter = "重点商机";
						};break;
						case 4:{
							vm.$data.Sunber.A_overter = "鸭子商机";
						};break;
						default:break;
					}
					
				})
				function jia(){					
					vm.$data.items.A_durationneed = $('#A_durationneed').val();
					vm.$data.items.A_acceptanceneed = $('#A_acceptanceneed').val();
					vm.$data.items.A_constructneed = $('#A_constructneed').val();
					vm.$data.items.A_defaultmakeup = $('#A_defaultmakeup').val();
					vm.$data.items.A_aptitudes = $('#A_aptitudes').val();
					vm.$data.items.A_projectscale = $('#A_projectscale').val();
					vm.$data.items.A_fundsbackfront = $('#A_fundsbackfront').val();
					vm.$data.items.A_budget = $('#A_budget').val();					
					//
					vm.$data.items.A_kickbackneed = $('#A_kickbackneed').val();
					vm.$data.items.A_projectdrag = $("#A_projectdrag").val();
					vm.$data.items.A_compete = $("#A_compete").val();
					vm.$data.items.A_consumerFocus = $("#A_consumerFocus").val();
					vm.$data.items.A_consumerkey =  $("#A_consumerkey").val();
					vm.$data.items.A_competitiveness = $("#A_competitiveness").val();
							parse();
						
				}
				function parse(){
						vm.$data.item.A_businessmass = parseInt(vm.$data.items.A_durationneed)+parseInt(vm.$data.items.A_acceptanceneed)+
					parseInt(vm.$data.items.A_constructneed)+parseInt(vm.$data.items.A_defaultmakeup)+parseInt(vm.$data.items.A_aptitudes)+
					parseInt(vm.$data.items.A_projectscale)+parseInt(vm.$data.items.A_fundsbackfront)+parseInt(vm.$data.items.A_budget);
					
					
						vm.$data.item.A_overorder = parseInt(vm.$data.items.A_kickbackneed)+parseInt(vm.$data.items.A_projectdrag)+
					parseInt(vm.$data.items.A_compete)+parseInt(vm.$data.items.A_consumerFocus)+parseInt(vm.$data.items.A_consumerkey)+
					parseInt(vm.$data.items.A_competitiveness);
					
					var A_overter = (parseInt(vm.$data.item.A_businessmass)+parseInt(vm.$data.item.A_overorder))/2;
//					console.log(vm.$data.item.A_conclusion)
					var indx = vm.$data.item.A_conclusion;
					if(A_overter<30){
						indx = 1;
					}else if(30<=A_overter&&A_overter<60){
						indx = 2;
					}else if(60<=A_overter&&A_overter<90){
						indx = 3;
					}else if(90<=A_overter){
						indx = 4;
					}
					switch(indx){
						case 1:{
							vm.$data.Sunber.A_overter = "放弃";
						};break;
						case 2:{
							vm.$data.Sunber.A_overter = "普通商机";
						};break;
						case 3:{
							vm.$data.Sunber.A_overter = "重点商机";
						};break;
						case 4:{
							vm.$data.Sunber.A_overter = "鸭子商机";
						};break;
						default:break;
					}
				}
			})
		</script>
	</body>
</html>
